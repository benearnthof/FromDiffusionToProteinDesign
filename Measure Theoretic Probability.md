https://staff.fnwi.uva.nl/p.j.c.spreij/onderwijs/master/mtp.pdf
https://web.math.princeton.edu/~js129/PDFs/teaching/MAT425_spring_2025/MAT425_Lecture_Notes.pdf
TODO: take a refresher on transfinite induction https://de.wikipedia.org/wiki/Transfinite_Induktion
## 1. $\sigma$-Algebras and measures

For any non-empty set $S$ we can select some collection of subsets $\Sigma_0 \subset 2^S$.
Such a collection of subsets is called an *algebra* on S if:
	(i) $S \in \Sigma_0$,
	(ii) $E \in \Sigma_0 \Rightarrow E^c \in \Sigma_0$,
	(iii) $E, F \in \Sigma_0 \Rightarrow E \cup F \in \Sigma_0$.
We notice immediately that the empty set $\emptyset$ always belongs to any algebra, since algebras contain the original set $S$ by (i) and are closed under complements (ii), thus the empty set, as the complement of the original set, must be member of any algebra. 

Property (iii) extends to finite unions by induction.

Furthermore, we can show that property (iii) also implies closure under finite intersections and finite set differences, as can be shown:
	$E \cap F=\left(E^c \cup F^c\right)^c$ 
	Leading to:
	$E, F \in \Sigma_0 \Rightarrow E \cap F \in \Sigma_0$,
	and analogously:
	$E \backslash F=E \cap F^c \in \Sigma_0$

### 1.2 Definition of $\sigma$-Algebra

For any nonempty set $S$, a collection of subsets $\Sigma \subset 2^S$ is called a $\sigma$-Algebra on S if it is an algebra and closed under countable unions: 
	$\bigcup_{n=1}^{\infty} E_n \in \Sigma$ for any $E_n \in \Sigma$ $(n = 1, 2, \ldots)$.

A pair $(S, \Sigma)$ is called a measurable space. Elements of $\Sigma$ are called measurable sets. 

#### 1.2.1 $\sigma$-Operator
For any collection $\mathcal{C}$ of subsets of a set $S$ we define the $\sigma$-Operator $\sigma(\mathcal{C})$. This Operator yields the smallest $\sigma$-Algebra that contains $\mathcal{C}$. $\sigma(\mathcal{C})$ is therefore the intersection of all $\sigma$-algebras that contain $\mathcal{C}$. This is very similar to the way we define inner and outer measures in Real Analysis, where we defined the smallest open cover of an interval as the intersection of all open covers of the respective interval. 
We say that $\mathcal{C}$ generates $\Sigma$. 
The union of two $\sigma$-algebras is not necessarily a $\sigma$-algebra. We write
$\Sigma_1 \vee \Sigma_2$ for $\sigma\left(\Sigma_1 \cup \Sigma_2\right)$ instead.
Note: On countable sets we can often just use the power set as a $\sigma$-algebra if we don't explicitly need the smallest $\sigma$-Algebra generated by the countable set.

#### 1.2.2 Borel sets and the Borel $\sigma$-algebra
Let $\mathcal{O}$ be the collection of all open subsets of $\mathbb{R}$ with the usual topology (in which all intervals (a, b) are open). Then we define
$\mathcal{B}:=\sigma(\mathcal{O})$.
As the Borel $\sigma$-Algebra. This notion can get quite abstract for sets in the general sense, but for the real numbers we can construct $\mathcal{B}$ like so: 

### Proposition 1.3 Construction of $\mathcal{B}$

Let $\mathcal{I}=\{(-\infty, x]: x \in \mathbb{R}\}$. Then $\sigma(\mathcal{I})=\mathcal{B}$.
**Proof:** First we show that any half open interval $(-\infty, x]$ can be expressed as a countable union of open intervals: 
	$(-\infty, x]=\cap_n\left(-\infty, x+\frac{1}{n}\right)$ 
Because $\sigma$-Algebras are closed under countable unions and thus, by De Morgan, closed under countable intersections we have shown that $\mathcal{I} \subset \mathcal{B}$ and $\sigma(\mathcal{I}) \subset \mathcal{B}$ since $\sigma(\mathcal{I})$ is the smallest $\sigma$-Algebra that contains $\mathcal{I}$. 
For the reverse inclusion we first observe that any open interval, by the definition of openness, can be expressed as a countable union of half open intervals like so: 
	$(-\infty, x)=\cup_n\left(-\infty, x-\frac{1}{n}\right] \in \sigma(\mathcal{I})$.
Thus, we can express any open interval $(a, b)$ as:
	$(a, b)=(-\infty, b) \backslash(-\infty, a] \in \sigma(\mathcal{I})$.
Where the inclusion in $\sigma(\mathcal{I})$ holds since algebras are closed under set difference.
We can now proceed by using the density, and countability, of the Rational numbers as follows: 
Let $G$ be an arbitrary open set.
By openness there must exist a rational number $\varepsilon_x>0$ for every $x \in G$ such that the open interval $\left(x-2 \varepsilon_x, x+2 \varepsilon_x\right) \subset G$. 
Now, considering the open interval $\left(x-\varepsilon_x, x+\varepsilon_x\right)$ nested in our original interval, we can pick, by density of the Rationals, any rational $q_x$ in this interval. For any such $q_x$ it holds that: $\left|x-q_x\right| \leq \varepsilon_x$.
We can see that: 
	$x \in\left(q_x-\varepsilon_x, q_x+\varepsilon_x\right) \subset \left(x-2 \varepsilon_x, x+2 \varepsilon_x\right) \subset G$
Meaning, that we can express our original $G$ as a countable union of such open intervals: 
	$G \subset \cup_{x \in G}\left(q_x-\varepsilon_x, q_x+\varepsilon_x\right) \subset G$
Where the union is indeed countable, because there exist only countably many rational points $q_x$ and $\varepsilon_x$.
This means in turn, that $G$ is indeed part of the $\sigma$-Algebra of open intervals: 
	$G \in \sigma(\mathcal{I})$  
Which leads us to the desired conclusion:
	$\mathcal{O} \subset \sigma(\mathcal{I})$ and therefore
	$\mathcal{B} \subset \sigma(\mathcal{I})$. (Since $\mathcal{B}$) was defined as the smallest such $\sigma$-Algebra. $\square$

Does any subset of $\mathbb{R}$ fall into $\mathcal{B}$? 
No. Vitali sets are a popular counter example, usually employed in the context of the measure problem, to show that there cannot exist a general measure function that assigns any subset of $\mathbb{R}$ a valid measure. One can show that the cardinality of $\mathcal{B}(\mathbb{R})$ is the same as the cardinality of $\mathbb{R}$ itself, leading to the same conclusion. I skip this proof here, please refer to the linked text for the full proof. The general idea is to show that both the cardinality of $\mathcal{B}(\mathbb{R})$ and the cardinality of the reals are equivalent (intuitively because the reals have the same cardinality as the power set of the natural numbers/the set of all infinite binary sequences, and we generate all substs of $\mathcal{B}(\mathbb{R})$ with a countable number of operations). Thus, when one shows that both of these sets have the same cardinality we notice that the powerset of the reals is of strictly larger cardinality $2^{\mathfrak{c}}$ which implies that there must be some subsets of the reals that are not contained in $\mathcal{B}(\mathbb{R})$.

### 1.2 Measures

In the context of probability we're interested in set functions that assign any subset of a sigma algebra a number ("measurement"). This function should also adhere to certain restrictions.

Let $S$ be any set and $\Sigma$ any $\sigma$-Algebra on $S$. A mapping $\mu: \Sigma \rightarrow[0, \infty]$ is 
	(i) *finitely additive* if $\mu(\emptyset)=0$ and $\mu(E \cup F)=\mu(E)+\mu(F)$ for every pair of disjoint sets $E$ and $F$.
	(ii) *$\sigma$-additive* if $\mu(\emptyset)=0$ and if $\mu\left(\cup_n E_n\right)=\sum_n \mu\left(E_n\right)$ for any sequence of disjoint sets of $\Sigma$ for which its union is also in $\Sigma$. (Which is technically fulfilled by additivity and closure under countable unions already).

#### Definition: Measure Space
Let the tuple $(S, \Sigma)$ be a measurable space. Endowed with a countably additive mapping $\mu: \Sigma \rightarrow[0, \infty]$ we obtain the triple $(S, \Sigma, \mu)$ $-$ a *measure space*.

Measures can have certain useful properties: 
	1. If $\mu(S)<\infty$ we say $\mu$ is finite
	2. If $\mu\left(S_n\right)<\infty$ for $S_n$ measurable sets and $S=\cup_n S_n$ we say $\mu$ is $\sigma$-finite
	3. If $\mu(S)=1$ we say $\mu$ is a *probability measure*

Simple examples for measures: 
* The *counting measure* $\tau$ on $2^{\mathbb{N}}$: $\tau(E)=|E|$ for any $E \in 2^{\mathbb{N}}$ 
* The *Dirac measure* $\delta(E)=\mathbf{1}_E\left(x_0\right)$, for $E \in \Sigma$
* The *Lebesgue measure* on the Borel $\sigma$-Algebra of the reals. 

#### Theorem 1.5: Existence and uniqueness of Lebesgue Measure
There exists a unique measure $\lambda$ on $(\mathbb{R}, \mathcal{B})$ with the property that for any interval $I=(a, b]$ with $a<b$ it holds that $\lambda(I)=b-a$.
**Proof:**
Deferred to later

We will make use of the Lebesgue measure in the Caratheodory Extension Theorem where we will show that $\mathcal{B}$ is no longer the largest $\sigma$-Algebra for which $\lambda$ can be coherently defined. We will extend $\lambda$ to a larger such $\sigma$-Algebra and then prove that by restricting $\lambda$ to our strictly smaller target $\sigma$-Algebra our initial assumptions about $\lambda$ still hold. More on that later.

#### Proposition 1.6: Rules for Measure Calculations
Let $(S, \Sigma, \mu)$ be a measure space. Then for all Sets $E, F \in \Sigma$ the following holds:
	(i) If $E \subset F$, then $\mu(E) \leq \mu(F)$.
	(ii) $\mu(E \cup F) \leq \mu(E)+\mu(F)$.
	(iii) $\mu\left(\cup_{k=1}^n E_k\right) \leq \sum_{k=1}^n \mu\left(E_k\right)$
	If $\mu$ is finite, we also have
	(iv) If $E \subset F$, then $\mu(F \backslash E)=\mu(F)-\mu(E)$.
	(v) $\mu(E \cup F)=\mu(E)+\mu(F)-\mu(E \cap F)$.
**Proof**: In (i) we can split the set $F$ into a disjoint union $F=E \cup(F \backslash E)$. Using the non-negative property of measures we can immediately see that the inequality holds. If $\mu$ is finite property (iv) also directly follows. To prove (ii) we first show that $E\cup F$ can be written as a disjoint Union $E \cup(F \backslash(E \cap F))$ where $E \cap F \subset F$. Applying (i) we directly obtain (ii) and via induction we also obtain (iii). (v) follows, analogous to these considerations, from application of (iv). $\square$

#### Proposition 1.7: Continuity Properties for Measures
Let $(E_n)$ be a sequence of sets in $\Sigma$.
	(i) If the sequence is increasing, with limit $E=\cup_n E_n$, then $\mu\left(E_n\right) \uparrow \mu(E)$ as $n \rightarrow \infty$ 
	(ii) If the sequence is decreasing, with limit $E=\cap_n E_n$ and if $\mu\left(E_n\right)<\infty$ from a certain index on, then $\mu\left(E_n\right) \downarrow \mu(E)$ as $n \rightarrow \infty$.
**Proof:** To prove (i) we define helper sets $D_i$ that are disjoint and thus help us "build up" all sequences of sets $(E_n)$ as disjoint unions of them. We then use [[Measure Theoretic Probability#Proposition 1.6 Rules for Measure Calculations]] to show the statement holds.
To prove (ii) we assume w.l.o.g. that $\mu\left(E_1\right)<\infty$. Again, we define a helper set $F_n$ as $F_n=E_1 \backslash E_n$ and note that $(F_n)$ is an increasing sequence with limit which allows us to use (i) directly to obtain (ii). $\square$

#### Corrolary 1.8: $\sigma$-sub-Additivity
Let $(S, \Sigma, \mu)$ be a measure space. For an arbitrary sequence $(E_n)$ of sets in $\Sigma$, we have $\mu\left(\cup_{n=1}^{\infty} E_n\right) \leq \sum_{n=1}^{\infty} \mu\left(E_n\right)$.
Proof: [[Measure Theoretic Probability#1.6 Exercises]] Exercise 2

### 1.3 Null Sets and Completeness of Measure Spaces

Consider a measure space $(S, \Sigma, \mu)$ and let any $E \in \Sigma$ be such that $\mu(E)=0$. If $N$ is a subset of $E$, then it is fair to suppose that also $\mu(N)=0$. But this only holds if $N \in \Sigma$. 

Intuition: $\Sigma$ may not be "closed" under the measure operation, meaning there might exist some subsets of sets with measure zero that are not measurable under $\mu$.

New terminology: A set $N \subset S$ is called a *null set* or $\mu$-null set, if there exists $E \in \Sigma$ with $E \supset N$ and $\mu(E)=0$. 
The collection of null sets is denoted by $\mathcal{N}$, or $\mathcal{N}_\mu$ since it depends on the choice of $\mu$.
We will show later that $\mathcal{N}$ is a $\sigma$-Algebra and that we can extend $\mu$ to $\bar{\Sigma}=\Sigma \vee \mathcal{N}$.
By extending $\mu$ to $\bar{\Sigma}$ we obtain an extended measure space $(S, \bar{\Sigma}, \bar{\mu})$, which is complete under the measure $\bar{\mu}$ since all $\bar{\mu}$-null sets belong to the $\sigma$-algebra $\bar{\Sigma}$.

### 1.4 $\pi$- and $d$-systems

The contents of the systems of sets we encounter in probability theory and functional analysis are often quite abstract and it can be hard to make constructive statements about the structure of the sets they contain. We will see how some "well behaved" systems of sets allow us to deduce properties of $\Sigma$ from the properties of $\mathcal{C}$ for $\sigma(\mathcal{C})=\Sigma$.

#### Definition 1.10: $\pi$-system

A collection $\mathcal{I}$ of subsets of $S$ is called a $\pi$-system if it is closed under pairwise intersection: 
	$I_1, I_2 \in \mathcal{I}$ implies $I_1 \cap I_2 \in \mathcal{I}$.

Corollary: By induction we can show that this also implies that $pi$-systems are closed under finite intersections.

How is this useful for us, given our stronger definition of $\sigma$-Algebra?
$\sigma$-Algebras allow *countably* many set operations. 
It is possible to disentangle the defining properties of a $\sigma$-Algebra into:
	(i) taking finite intersections
	(ii) the defining properties of a $d$-system / $Dynkin$-system

#### Definition 1.11: $d$-system / $Dynkin$-system

A collection $\mathcal{D}$ of subsets of $S$ is called a $d$-system if the following conditions hold:
	(i) $S \in \mathcal{D}$.
	(ii) If $E, F \in \mathcal{D}$ such that $E \subset F$, then $F \backslash E \in \mathcal{D}$. (note this is a less general assumption than general set differences)
	(iii) If $E_n \in \mathcal{D}$ for $n \in \mathbb{N}$, and $E_n \subset E_{n+1}$ for all $n$, then $\cup_n E_n \in \mathcal{D}$.

#### Proposition 1.12: $\Sigma$ is a $\sigma$-algebra iff it is a $\pi$-system and a $d$-system.

**Proof** Outline: We need to get from the combined properties of pi and dynkin systems to the properties of sigma-Algebras. We already get finite intersections for free. Can we somehow use the "nested difference" property of Dynkin systems with the countable union property to arrive at a full $\sigma$-Algebra? Implication from $\sigma$-Algebra to pi and d-systems is trivial.
First we observe that the "Universe" property is given in d-systems. We use this in combination with (ii) to show that since every subset of a d-system is at least subset of the "universe" set we recover closure under the complement operation. Now we can derive that our system is thus closed under finite unions sine we can express a union as a complement of an intersection of complements, and $\Sigma$ is closed under intersections because it is a $pi$-system. We finally combine this with the third property of dynkin systems to recover that $\Sigma$ must be a $\sigma$-Algebra.
Clarification: We show the countable union property by first defining auxiliary sets $B_n$ like so: 
	$B_1=A_1, \quad B_n=A_n \backslash \bigcup_{k=1}^{n-1} A_k$ for $n \geq 2$.
Where it is clear that each $B_n \subseteq A_n$, the $B_n$ are pairwise disjoint, and $\bigcup_{n=1}^{\infty} A_n=\bigcup_{n=1}^{\infty} B_n$. We only utilize finite intersections, difference and disjoint countable unions, which we all have shown to be valid operations for $\Sigma$. So we can conclude that $B_n \in \Sigma$ for all $n_r$ and finally:
	$\bigcup_{n=1}^{\infty} A_n=\bigcup_{n=1}^{\infty} B_n \in \Sigma$ $\qquad \square$

This leads us straight to Dynkin's Lemma:
#### Proposition 1.13: Dynkin's Lemma: 
Let $\mathcal{I}$ be a $\pi$-system. Then $d(\mathcal{I})=\sigma(\mathcal{I})$.
Proof in the linked notes.
Proposition 1.13 is equivalent to: 
Let $\mathcal{I}$ be a $\pi$-system and $\mathcal{D}$ be a $d$-system. If $\mathcal{I} \subset \mathcal{D}$, then $\sigma(\mathcal{I}) \subset \mathcal{D}$.

Which allows us to show that any finite measure on $\Sigma$ is characterized by its action on a rich enough $\pi$-system. (If we have two **finite** measures $\mu$ and $\nu$ defined on a $\sigma$-Algebra $\Sigma$, and they agree on a $\pi$-system $\mathcal{P} \subseteq \Sigma$ that generates $\Sigma$, then they must coincide on all of $\Sigma$).

#### Theorem 1.15: Uniqueness of Measures

Let $\mathcal{I}$ be a $\pi$-system and $\Sigma=\sigma(\mathcal{I})$. Let $\mu_1$ and $\mu_2$ be finite measures on $\Sigma$ with the properties that $\mu_1(S)=\mu_2(S)$ and that $\mu_1$ and $\mu_2$ coincide on $\mathcal{I}$.  Then $\mu_1=\mu_2($ on $\Sigma)$. (The measures coincide on the entire sigma Algebra.)
Note: Without finiteness for the measures this theorem does not hold.

### 1.5: Probability Language

In Probability Theory, we are used to the notation $(\Omega, \mathcal{F}, \mathbb{P})$ where we define such a specific instance of a measure space, equipped with a *probability* measure as a *probability space*.
In this context, the measure $\mathbb{P}$ is normed to $\mathbb{P}(\Omega)=1$.  where we refer to $\Omega$ as set of outcomes with the respective *events* being subsets of $\mathcal{F}$. 
**An event is a measurable subset of the set of all outcomes.**

A probability space can be interpreted as a mathematical model of a random experiment. 

In many interesting cases one needs to be careful how one specifies a probability measure to a probability space. Consider infinite sequences of coin tosses. The set of outcomes would take the form $\Omega=\{0,1\}^{\mathbb{N}}$ with each potential outcome being in infinite sequence $\left(\omega_1, \omega_2, \ldots\right)$ with $\omega_n \in\{0,1\}$. Can we just use the powerset of $\Omega$ as a suitable $\sigma$-Algebra?
No! We can show that there is a bijection between the set of all infinite binary sequences (our set of events) and any interval on the real number line, meaning that we run into the same cardinality problem we already encountered when trying to show that there are subsets of $\mathbb{R}$ that are not part of $\mathfrak{B}(\mathbb{R})$. 
How can we find a suitable candidate then?
An alternative would be to define $\mathcal{C}$ as the collection of all events:
	$\mathcal{C}=\left\{\left\{\omega \in \Omega: \omega_n=s\right\}, n \in \mathbb{N}, s \in\{0,1\}\right\}$
Where the n-th entry corresponds to some outcome. 
One can then show that there exists a probability measure on $\mathcal{F}=\sigma(\mathcal{C})$ that recovers all finite cases nicely. Proof: TODO

#### Limsup and Liminf

Interpreting $\mathcal{F}$ as a collection of events one can introduce limsup and liminf as special events.
Consider a sequence of events $E_1, E_2, \dots$ and define:
	$\begin{aligned} \limsup E_n & :=\bigcap_{m=1}^{\infty} \bigcup_{n=m}^{\infty} E_n \\ \liminf E_n & :=\bigcup_{m=1}^{\infty} \bigcap_{n=m}^{\infty} E_n .\end{aligned}$
Limsup is described as the event that the $E_n$ occur infinitely often.
Liminf is the event that the $E_n$ occur eventually.
Proofs/Intuition in exercises. 




### 1.6 Exercises

#### 1.6.2 Prove [[Measure Theoretic Probability#Corrolary 1.8 $ sigma$-sub-Additivity]]
